extends ../../layouts/application

mixin activity(activity)
  p.index-activity__name=activity.name
  p.index-activity__workout-label Date:
  p.index-activity__date=activity.date('dddd, MMMM Do YYYY')
  if activity.workoutType()
    p.index-activity__workout-label Workout Type:
    p.index-activity__workout-tag(class=`index-activity__workout-tag--${activity.workoutType().toLowerCase()}`)=activity.workoutType()
  unless activity.hasGPS()
    p.index-activity__workout-label No GPS data available

block content
  div.profile
    img.profile__image.src(src=`${user.photos[0].value}`, alt=`Photo of ${user.displayName}`)
    div.profile__text
      p.is-bold.f2=user.displayName
      p.f3=user._json.city
  div.activities-wrapper
    each activityGroup in Object.values(activitiesByWeek)
      - const startOfWeek = activityGroup[0].getStartOfWeek().format('dddd MMMM, D')
      - const endOfWeek = activityGroup[0].getEndOfWeek().format('dddd MMMM, D')
      div.activities-wrapper__week
        div.activities-wrapper__seperator
          p.activities-wrapper__text.f3.is-bold=`${startOfWeek} to `
          p.activities-wrapper__text.f3.is-bold=endOfWeek
        div.activities-wrapper__weekly-activities
          each activity, index in Object.values(activityGroup).reverse()
            if activity.hasGPS()
              a.index-activity.index-activity--active(href=`activities/${activity.id}`)
                +activity(activity)
            else
              div.index-activity.index-activity--inactive
                +activity(activity)
